<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <title>DoloChores</title>
  </head>
  <body>
    <main class="container">
        <nav>
            <ul>
                <li><strong>DoloChores</strong></li>
            </ul>
            <ul>
                <li><a href="{{ url_for('all_chores') }}">All Chores</a></li>
                <li><a href="{{ url_for('priorities') }}">Priorities</a></li>
                <li>
                    <details class="dropdown">
                        <summary>My Chores</summary>
                        <ul class="dropdown-menu">
                            <li><a href="{{ url_for('my_chores', username='Dan') }}">Dan's Chores</a></li>
                            <li><a href="{{ url_for('my_chores', username='Kim') }}">Kim's Chores</a></li>
                            <li><a href="{{ url_for('my_chores', username='Katie') }}">Katie's Chores</a></li>
                        </ul>
                    </details>
                </li>
                <li><a href="{{ url_for('search') }}" role="button" class="contrast outline" data-tooltip="Search Chores">&#128269;</a></li>
                <li>
                    <details class="dropdown">
                        <summary role="button" class="contrast outline">&#8942;</summary>
                        <ul class="dropdown-menu">
                            <li><a href="#" data-target="add-chore-modal" onclick="toggleModal(event)">Add Chore</a></li>
                            <li><a href="#" id="email-chores-btn">Email Chores List</a></li>
                        </ul>
                    </details>
                </li>
            </ul>
        </nav>
        <hr>
        {% block content %}{% endblock %}
    </main>

    <!-- Add Chore Modal -->
    <dialog id="add-chore-modal">
      <article>
        <header>
          <a href="#close" aria-label="Close" class="close" data-target="add-chore-modal" onclick="toggleModal(event)"></a>
          <h2>Add a New Chore</h2>
        </header>
        <form id="add-chore-form">
            <div class="grid">
                <label for="title">
                    Title
                    <input type="text" id="title" name="title" required>
                </label>
                <label for="user_id">
                    Assignee
                    <select id="user_id" name="user_id" required>
                        {% for user in users %}
                        <option value="{{ user.id }}">{{ user.name }}</option>
                        {% endfor %}
                    </select>
                </label>
            </div>
            <div class="grid">
                <label for="category">
                    Category
                    <select id="category" name="category">
                        <option value="all rooms">all rooms</option>
                        <option value="bathroom">bathroom</option>
                        <option value="bedrooms">bedrooms</option>
                        <option value="counters">counters</option>
                        <option value="floors">floors</option>
                        <option value="garage">garage</option>
                        <option value="hvac">hvac</option>
                        <option value="kitchen">kitchen</option>
                        <option value="laundry">laundry</option>
                        <option value="outside">outside</option>
                        <option value="plumbing">plumbing</option>
                        <option value="riley">riley</option>
                    </select>
                </label>
                <label for="frequency">
                    Frequency (days)
                    <select id="frequency" name="frequency" required>
                        <option value="14">14</option>
                        <option value="30">30</option>
                        <option value="90">90</option>
                        <option value="182">182</option>
                        <option value="365">365</option>
                        <option value="730">730</option>
                        <option value="1095">1095</option>
                        <option value="2555">2555</option>
                    </select>
                </label>
                <label for="last_completed">
                    Last Completed
                    <input type="date" id="last_completed" name="last_completed" required>
                </label>
            </div>
            <label for="notes">Notes</label>
            <textarea id="notes" name="notes" rows="3"></textarea>
            <button type="submit">Add Chore</button>
        </form>
      </article>
    </dialog>

    <!-- Chore Detail Modal -->
    <dialog id="chore-detail-modal">
      <article>
        <header>
          <a href="#close" aria-label="Close" class="close" data-target="chore-detail-modal" onclick="toggleModal(event)"></a>
          <h2 id="chore-detail-title">Chore Details</h2>
        </header>
        <div id="chore-detail-content">
            <!-- Chore details will be populated here -->
        </div>
        <footer>
            <details role="list" dir="rtl">
                <summary aria-haspopup="listbox" role="button" class="contrast outline">Actions</summary>
                <ul role="listbox">
                    <li><a href="#" id="chore-detail-delete-btn">Delete</a></li>
                </ul>
            </details>
        </footer>
      </article>
    </dialog>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  </body>
</html>
